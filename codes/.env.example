# Cataract-LMM Environment Configuration Template
# Copy this file to .env and customize for your environment

# ============================================================================
# Project Paths Configuration
# ============================================================================

# Root directory for the entire project
PROJECT_ROOT=/workspaces/Cataract_LMM/codes

# Data directories (customize these paths based on your data location)
# Following the dataset naming convention from research paper
DATA_ROOT=/path/to/your/data/Cataract-LMM

# Raw videos directory (3,000 videos)
RAW_VIDEOS_DIR=${DATA_ROOT}/1_Raw_Videos/videos

# Phase recognition dataset (150 videos)
PHASE_RECOGNITION_DIR=${DATA_ROOT}/2_Phase_Recognition

# Instance segmentation dataset (6,094 frames from 150 videos)
INSTANCE_SEGMENTATION_DIR=${DATA_ROOT}/3_Instance_Segmentation

# Instrument tracking dataset (170 clips)
INSTRUMENT_TRACKING_DIR=${DATA_ROOT}/4_Instrument_Tracking

# Skill assessment dataset (170 clips)
SKILL_ASSESSMENT_DIR=${DATA_ROOT}/5_Skill_Assessment

# ============================================================================
# Module-Specific Paths
# ============================================================================

# Surgical Video Processing
VIDEO_PROCESSING_ROOT=${PROJECT_ROOT}/surgical-video-processing
VIDEO_PROCESSING_OUTPUT=${VIDEO_PROCESSING_ROOT}/outputs
VIDEO_PROCESSING_LOGS=${VIDEO_PROCESSING_ROOT}/logs

# Surgical Instance Segmentation
INSTANCE_SEGMENTATION_ROOT=${PROJECT_ROOT}/surgical-instance-segmentation
INSTANCE_SEGMENTATION_OUTPUT=${INSTANCE_SEGMENTATION_ROOT}/outputs
INSTANCE_SEGMENTATION_MODELS=${INSTANCE_SEGMENTATION_ROOT}/models

# Surgical Phase Recognition
PHASE_RECOGNITION_ROOT=${PROJECT_ROOT}/surgical-phase-recognition
PHASE_RECOGNITION_OUTPUT=${PHASE_RECOGNITION_ROOT}/outputs
PHASE_RECOGNITION_MODELS=${PHASE_RECOGNITION_ROOT}/models

# Surgical Skill Assessment
SKILL_ASSESSMENT_ROOT=${PROJECT_ROOT}/surgical-skill-assessment
SKILL_ASSESSMENT_OUTPUT=${SKILL_ASSESSMENT_ROOT}/outputs
SKILL_ASSESSMENT_MODELS=${SKILL_ASSESSMENT_ROOT}/models

# ============================================================================
# Hardware Configuration
# ============================================================================

# CUDA Configuration
CUDA_VISIBLE_DEVICES=0
TORCH_CUDA_ARCH_LIST="6.1;7.0;7.5;8.0;8.6"

# Memory settings
MAX_GPU_MEMORY=8  # GB
MAX_CPU_CORES=8
MAX_BATCH_SIZE=16

# ============================================================================
# Dataset Naming Convention Settings
# ============================================================================

# Hospital site codes (as per dataset convention)
FARABI_SITE_CODE=S1
NOOR_SITE_CODE=S2

# Dataset prefixes
RAW_VIDEO_PREFIX=RV
PHASE_RECOGNITION_PREFIX=PH
INSTANCE_SEGMENTATION_PREFIX=SE
INSTRUMENT_TRACKING_PREFIX=TR
SKILL_ASSESSMENT_PREFIX=SK

# ============================================================================
# Logging Configuration
# ============================================================================

# Log levels: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO
LOG_FORMAT="%(asctime)s - %(name)s - %(levelname)s - %(message)s"

# Log file paths
VIDEO_PROCESSING_LOG_FILE=${VIDEO_PROCESSING_LOGS}/video_processing.log
SEGMENTATION_LOG_FILE=${INSTRUMENT_SEGMENTATION_ROOT}/logs/segmentation.log
CLASSIFICATION_LOG_FILE=${PHASE_CLASSIFICATION_ROOT}/logs/classification.log
SKILL_ASSESSMENT_LOG_FILE=${SKILL_ASSESSMENT_ROOT}/logs/skill_assessment.log

# ============================================================================
# Model Configuration
# ============================================================================

# Pre-trained model paths
YOLO_MODEL_PATH=${INSTRUMENT_SEGMENTATION_ROOT}/yolov8n-seg.pt
MASK_RCNN_MODEL_PATH=${INSTRUMENT_SEGMENTATION_ROOT}/models/mask_rcnn/pretrained
SAM_MODEL_PATH=${INSTRUMENT_SEGMENTATION_ROOT}/models/sam/pretrained

# Model cache directory
MODEL_CACHE_DIR=${PROJECT_ROOT}/.model_cache
HUGGINGFACE_CACHE_DIR=${MODEL_CACHE_DIR}/huggingface
TORCH_CACHE_DIR=${MODEL_CACHE_DIR}/torch

# ============================================================================
# Video Processing Configuration
# ============================================================================

# FFmpeg settings
FFMPEG_PATH=ffmpeg
FFMPEG_THREADS=4
FFMPEG_PRESET=medium

# Video processing defaults
DEFAULT_OUTPUT_FORMAT=mp4
DEFAULT_VIDEO_CODEC=h264
DEFAULT_QUALITY=23  # CRF value for H.264

# Hospital-specific settings (as per research paper)
FARABI_RESOLUTION=720x480
FARABI_FPS=30
NOOR_RESOLUTION=1920x1080
NOOR_FPS=60

# ============================================================================
# Training Configuration
# ============================================================================

# Default training parameters
DEFAULT_LEARNING_RATE=0.001
DEFAULT_BATCH_SIZE=16
DEFAULT_NUM_EPOCHS=100
DEFAULT_VALIDATION_SPLIT=0.2

# Model checkpointing
CHECKPOINT_DIR=${PROJECT_ROOT}/checkpoints
SAVE_CHECKPOINT_EVERY=10  # epochs
MAX_CHECKPOINTS_TO_KEEP=5

# ============================================================================
# Evaluation Configuration
# ============================================================================

# Metrics and evaluation
EVALUATION_OUTPUT_DIR=${PROJECT_ROOT}/evaluation_results
GENERATE_CONFUSION_MATRIX=true
SAVE_PREDICTIONS=true

# ============================================================================
# Development Settings
# ============================================================================

# Debug mode
DEBUG_MODE=false
VERBOSE_LOGGING=false

# Testing
RUN_TESTS_ON_STARTUP=false
TEST_DATA_DIR=${PROJECT_ROOT}/test_data

# Performance monitoring
ENABLE_PERFORMANCE_MONITORING=true
PROFILE_MEMORY_USAGE=false

# ============================================================================
# External Services (Optional)
# ============================================================================

# Experiment tracking (uncomment and configure if using)
# WANDB_PROJECT=cataract-lmm
# WANDB_ENTITY=your-username
# MLFLOW_TRACKING_URI=http://localhost:5000

# Cloud storage (uncomment and configure if using)
# AWS_ACCESS_KEY_ID=your-access-key
# AWS_SECRET_ACCESS_KEY=your-secret-key
# AWS_DEFAULT_REGION=us-west-2
# S3_BUCKET=your-bucket-name

# ============================================================================
# END - Environment Configuration
# ============================================================================
